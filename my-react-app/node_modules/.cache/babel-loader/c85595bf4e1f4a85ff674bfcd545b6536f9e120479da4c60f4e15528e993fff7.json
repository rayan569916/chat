{"ast":null,"code":"export const BASE_URL = \"http://localhost:5000\";\nexport const TEST_API_BACKEND = `${BASE_URL}/test-frontend-connectivity`;\nexport const TEST_API_DB = `${BASE_URL}/test-db-connectivity`;\nexport const LOGIN_API = `${BASE_URL}/login`;\nimport axios from \"axios\";\nexport async function refreshAccessToken() {\n  const refreshToken = localStorage.getItem('refreshToken');\n  const response = await axios.post('http://localhost:5000/refresh', {}, {\n    headers: {\n      Authorization: `Bearer ${refreshToken}`\n    }\n  });\n  localStorage.setItem('accessToken', response.data.access_token);\n}\naxios.interceptors.response.use(response => response, async error => {\n  const originalRequest = error.config;\n  if (error.response && error.response.status === 401 && !originalRequest._retry) {\n    originalRequest._retry = true;\n    try {\n      const newToken = await refreshAccessToken();\n      originalRequest.headers['Authorization'] = `Bearer ${newToken}`;\n      return axios(originalRequest); // Retry the original request\n    } catch (refreshError) {\n      // Optionally, redirect to login or show error\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('refreshToken');\n      window.location.href = '/login';\n      return Promise.reject(refreshError);\n    }\n  }\n  return Promise.reject(error);\n});","map":{"version":3,"names":["BASE_URL","TEST_API_BACKEND","TEST_API_DB","LOGIN_API","axios","refreshAccessToken","refreshToken","localStorage","getItem","response","post","headers","Authorization","setItem","data","access_token","interceptors","use","error","originalRequest","config","status","_retry","newToken","refreshError","removeItem","window","location","href","Promise","reject"],"sources":["C:/Users/abin.r/Desktop/sidekick/chat/my-react-app/src/api.js"],"sourcesContent":["export const BASE_URL = \"http://localhost:5000\";\r\nexport const TEST_API_BACKEND =  `${BASE_URL}/test-frontend-connectivity`;\r\nexport const TEST_API_DB = `${BASE_URL}/test-db-connectivity`;\r\nexport const LOGIN_API = `${BASE_URL}/login`;\r\n\r\nimport axios from \"axios\";\r\n\r\nexport async function refreshAccessToken() {\r\n    const refreshToken = localStorage.getItem('refreshToken');\r\n    const response = await axios.post('http://localhost:5000/refresh', {}, {\r\n        headers: { Authorization: `Bearer ${refreshToken}` }\r\n    });\r\n    localStorage.setItem('accessToken', response.data.access_token);\r\n}\r\n\r\naxios.interceptors.response.use(\r\n    response => response,\r\n    async error => {\r\n        const originalRequest = error.config;\r\n        if (error.response && error.response.status === 401 && !originalRequest._retry) {\r\n            originalRequest._retry = true;\r\n            try {\r\n                const newToken = await refreshAccessToken();\r\n                originalRequest.headers['Authorization'] = `Bearer ${newToken}`;\r\n                return axios(originalRequest); // Retry the original request\r\n            } catch (refreshError) {\r\n                // Optionally, redirect to login or show error\r\n                localStorage.removeItem('accessToken');\r\n                localStorage.removeItem('refreshToken');\r\n                window.location.href = '/login';\r\n                return Promise.reject(refreshError);\r\n            }\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);"],"mappings":"AAAA,OAAO,MAAMA,QAAQ,GAAG,uBAAuB;AAC/C,OAAO,MAAMC,gBAAgB,GAAI,GAAGD,QAAQ,6BAA6B;AACzE,OAAO,MAAME,WAAW,GAAG,GAAGF,QAAQ,uBAAuB;AAC7D,OAAO,MAAMG,SAAS,GAAG,GAAGH,QAAQ,QAAQ;AAE5C,OAAOI,KAAK,MAAM,OAAO;AAEzB,OAAO,eAAeC,kBAAkBA,CAAA,EAAG;EACvC,MAAMC,YAAY,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;EACzD,MAAMC,QAAQ,GAAG,MAAML,KAAK,CAACM,IAAI,CAAC,+BAA+B,EAAE,CAAC,CAAC,EAAE;IACnEC,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUN,YAAY;IAAG;EACvD,CAAC,CAAC;EACFC,YAAY,CAACM,OAAO,CAAC,aAAa,EAAEJ,QAAQ,CAACK,IAAI,CAACC,YAAY,CAAC;AACnE;AAEAX,KAAK,CAACY,YAAY,CAACP,QAAQ,CAACQ,GAAG,CAC3BR,QAAQ,IAAIA,QAAQ,EACpB,MAAMS,KAAK,IAAI;EACX,MAAMC,eAAe,GAAGD,KAAK,CAACE,MAAM;EACpC,IAAIF,KAAK,CAACT,QAAQ,IAAIS,KAAK,CAACT,QAAQ,CAACY,MAAM,KAAK,GAAG,IAAI,CAACF,eAAe,CAACG,MAAM,EAAE;IAC5EH,eAAe,CAACG,MAAM,GAAG,IAAI;IAC7B,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMlB,kBAAkB,CAAC,CAAC;MAC3Cc,eAAe,CAACR,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUY,QAAQ,EAAE;MAC/D,OAAOnB,KAAK,CAACe,eAAe,CAAC,CAAC,CAAC;IACnC,CAAC,CAAC,OAAOK,YAAY,EAAE;MACnB;MACAjB,YAAY,CAACkB,UAAU,CAAC,aAAa,CAAC;MACtClB,YAAY,CAACkB,UAAU,CAAC,cAAc,CAAC;MACvCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MAC/B,OAAOC,OAAO,CAACC,MAAM,CAACN,YAAY,CAAC;IACvC;EACJ;EACA,OAAOK,OAAO,CAACC,MAAM,CAACZ,KAAK,CAAC;AAChC,CACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}